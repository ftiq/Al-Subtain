<?xml version="1.0" encoding="UTF-8" ?>
<templates id="appointment_details_widget" xml:space="preserve">


    <t t-name="appointment_details_widget.AppointmentDetailsWidget">

        <button t-if="isVisible" 
                class="btn btn-sm btn-info o_field_appointment_details_widget" 
                t-on-click="onButtonClick"
                title="ุนุฑุถ ุชูุงุตูู ุงูููุนุฏ">
            <i class="fa fa-calendar-check-o">๐</i>
        </button>
    </t>


    <t t-name="appointment_details_widget.AppointmentDetailsPopover">
        <div class="p-3" style="max-height: 500px; overflow-y: auto; min-width: 600px;">

            <div class="mb-3 text-center bg-primary text-white p-3 rounded">
                <h5 class="mb-0">
                    <i class="fa fa-calendar-check me-2"/>
                    ุชูุงุตูู ุงูููุนุฏ
                </h5>
            </div>


            <div class="card mb-3">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="fa fa-user text-primary me-2"/>
                        ูุนูููุงุช ุงูุนููู
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <strong>ุงูุงุณู:</strong> <span t-esc="appointmentData.customer_name"/>
                        </div>
                        <div class="col-md-6">
                            <strong>ุงููุงุชู:</strong> <span t-esc="appointmentData.customer_phone"/>
                        </div>
                        <div class="col-12 mt-2">
                            <strong>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</strong> <span t-esc="appointmentData.customer_email"/>
                        </div>
                    </div>
                </div>
            </div>


            <div class="card mb-3">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="fa fa-clock text-warning me-2"/>
                        ูุนูููุงุช ุงูููุนุฏ
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <strong>ุชุงุฑูุฎ ูููุช ุงูููุนุฏ:</strong> 
                            <br/>
                            <span class="badge bg-info fs-6" t-esc="appointmentData.appointment_datetime"/>
                        </div>
                        <div class="col-md-6">
                            <strong>ุญุงูุฉ ุงูููุนุฏ:</strong>
                            <br/>
                            <span class="badge fs-6" 
                                  t-att-class="appointmentData.appointment_status === 'ูุงุฏู' ? 'bg-success' : 
                                             appointmentData.appointment_status === 'ูุคูุฏ' ? 'bg-primary' : 'bg-danger'"
                                  t-esc="appointmentData.appointment_status"/>
                        </div>
                    </div>
                </div>
            </div>


            <div class="card mb-3">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="fa fa-project-diagram text-success me-2"/>
                        ูุนูููุงุช ุงููุดุฑูุน
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-8">
                            <strong>ุงุณู ุงููุดุฑูุน:</strong> <span t-esc="appointmentData.project_name"/>
                        </div>
                        <div class="col-md-4">
                            <strong>ููุฏูุจ ุงููุจูุนุงุช:</strong> <span t-esc="appointmentData.salesperson"/>
                        </div>
                    </div>
                </div>
            </div>


            <div class="card mb-3">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="fa fa-shopping-cart text-danger me-2"/>
                        ูุนูููุงุช ุงูุทูุจ
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <strong>ุญุงูุฉ ุงูุทูุจ:</strong>
                            <span class="badge fs-6"
                                  t-att-class="appointmentData.state === 'ูุคูุฏ' ? 'bg-success' : 
                                             appointmentData.state === 'ูุณูุฏุฉ' ? 'bg-secondary' : 'bg-warning'"
                                  t-esc="appointmentData.state"/>
                        </div>
                        <div class="col-md-6">
                            <strong>ุฅุฌูุงูู ุงููุจูุบ:</strong> 
                            <span class="fw-bold text-success" t-esc="appointmentData.total_amount"/> ุฏ.ุน
                        </div>
                    </div>
                </div>
            </div>


            <div class="card">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="fa fa-cube text-primary me-2"/>
                        ุงูููุชุฌุงุช ุงููุญุฌูุฒุฉ
                    </h6>
                </div>
                <div class="card-body">
                    <div t-if="appointmentData.products.length > 0">
                        <div class="table-responsive">
                            <table class="table table-sm table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th>ุงูููุชุฌ</th>
                                        <th class="text-center">ุงููููุฉ</th>
                                        <th class="text-center">ุงูุณุนุฑ</th>
                                        <th class="text-center">ุงููุฌููุน</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="appointmentData.products" t-as="product" t-key="product_index">
                                        <tr>
                                            <td>
                                                <span class="fw-bold" t-esc="product.name"/>
                                            </td>
                                            <td class="text-center">
                                                <span class="badge bg-info" t-esc="product.qty"/>
                                                <small t-if="product.uom" class="text-muted ms-1" t-esc="product.uom"/>
                                            </td>
                                            <td class="text-center">
                                                <span t-if="product.price_unit" t-esc="product.price_unit"/> ุฏ.ุน
                                            </td>
                                            <td class="text-center">
                                                <span class="fw-bold text-success" t-if="product.price_subtotal" t-esc="product.price_subtotal"/> ุฏ.ุน
                                            </td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div t-else="" class="text-muted text-center">
                        <i class="fa fa-info-circle me-2"/>
                        ูุง ุชูุฌุฏ ููุชุฌุงุช ูุญุฌูุฒุฉ
                    </div>
                </div>
            </div>
        </div>
    </t>

</templates> 