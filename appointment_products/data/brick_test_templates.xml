<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">

        <record id="uom_square_millimeter_ap" model="uom.uom">
            <field name="name">mm²</field>
            <field name="category_id" ref="uom.uom_categ_surface"/>
            <field name="factor" eval="1000000"/>
            <field name="uom_type">smaller</field>
        </record>


        <record id="uom_categ_weight_ap" model="uom.category">
            <field name="name">الوزن</field>
        </record>


        <record id="uom_categ_pressure_ap" model="uom.category">
            <field name="name">مقاومة الانضغاط</field>
        </record>


        <record id="uom_categ_rating_ap" model="uom.category">
            <field name="name">الدرجات والتقييم</field>
        </record>

        <record id="uom_gram_ap" model="uom.uom">
            <field name="name">غم</field>
            <field name="category_id" ref="appointment_products.uom_categ_weight_ap"/>
            <field name="factor" eval="1.0"/>
            <field name="uom_type">reference</field>
        </record>

        <record id="uom_kilogram_ap" model="uom.uom">
            <field name="name">كغم</field>
            <field name="category_id" ref="appointment_products.uom_categ_weight_ap"/>
            <field name="factor" eval="0.001"/>
            <field name="uom_type">bigger</field>
        </record>

        <record id="uom_kilonewton_ap" model="uom.uom">
            <field name="name">kN</field>
            <field name="category_id" ref="appointment_products.uom_categ_weight_ap"/>
            <field name="factor" eval="0.000102"/>
            <field name="uom_type">bigger</field>
        </record>

        <record id="uom_newton_per_mm2_ap" model="uom.uom">
            <field name="name">N/mm²</field>
            <field name="category_id" ref="appointment_products.uom_categ_pressure_ap"/>
            <field name="factor" eval="1.0"/>
            <field name="uom_type">reference</field>
        </record>

        <record id="uom_mpa_ap" model="uom.uom">
            <field name="name">MPa</field>
            <field name="category_id" ref="appointment_products.uom_categ_pressure_ap"/>
            <field name="factor" eval="0.001"/>
            <field name="uom_type">bigger</field>
        </record>


        <record id="uom_categ_percent_ap" model="uom.category">
            <field name="name">النسب المئوية</field>
        </record>

        <record id="uom_percent_ap" model="uom.uom">
            <field name="name">%</field>
            <field name="category_id" ref="appointment_products.uom_categ_percent_ap"/>
            <field name="factor" eval="1.0"/>
            <field name="uom_type">reference</field>
        </record>

        <record id="uom_degree_ap" model="uom.uom">
            <field name="name">درجة</field>
            <field name="category_id" ref="appointment_products.uom_categ_rating_ap"/>
            <field name="factor" eval="1.0"/>
            <field name="uom_type">reference</field>
        </record>

        <record id="template_brick_dimensions" model="lab.test.template">
            <field name="name">فحص قياسات الطابوق الطيني-A</field>
            <field name="code">BRICK_DIMENS</field>
            <field name="description">فحص الطول والعرض والارتفاع وقطر الثقوب للطابوق الطيني حسب IQS 25</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">10</field>
        </record>

        <record id="crit_brick_length" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">الطول (مم)-A</field>
            <field name="code">LENGTH_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">232.8</field>
            <field name="max_value">247.2</field>
            <field name="target_value">240</field>
            <field name="sequence">10</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_width" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">العرض (مم)-A</field>
            <field name="code">WIDTH_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">115</field>
            <field name="max_value">121.54</field>
            <field name="target_value">118</field>
            <field name="sequence">20</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_height" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">الارتفاع (مم)-A</field>
            <field name="code">HEIGHT_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">73</field>
            <field name="max_value">77</field>
            <field name="target_value">75</field>
            <field name="sequence">30</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_hole_dia" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">قطر الفتحة (مم)-A</field>
            <field name="code">HOLE_DIA_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">8</field>
            <field name="max_value">25</field>
            <field name="target_value">12</field>
            <field name="sequence">40</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_hole_count" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">عدد الفتحات-A</field>
            <field name="code">HOLE_COUNT_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_unit"/>
            <field name="min_value">15</field>
            <field name="max_value">25</field>
            <field name="target_value">19</field>
            <field name="sequence">45</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_area" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">المساحة (مم²)-A</field>
            <field name="code">AREA_A</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_square_millimeter_ap"/>
            <field name="min_value">25000</field>
            <field name="max_value">30000</field>
            <field name="target_value">27600</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('LENGTH_A') * avg_series('WIDTH_A')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_length'), ref('crit_brick_width')])]"/>
            <field name="sequence">50</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_brick_void_ratio" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">نسبة الفتحات (%)-A</field>
            <field name="code">VOID_RATIO_A</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_percent_ap"/>
            <field name="min_value">25</field>
            <field name="max_value">35</field>
            <field name="target_value">30</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = (pow(avg_series('HOLE_DIA_A'), 2) * 3.1416 / 4 * avg_series('HOLE_COUNT_A')) / (avg_series('LENGTH_A') * avg_series('WIDTH_A')) * 100 if (avg_series('LENGTH_A') and avg_series('WIDTH_A') and avg_series('HOLE_COUNT_A')) else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_hole_dia'), ref('crit_brick_hole_count'), ref('crit_brick_length'), ref('crit_brick_width')])]"/>
            <field name="sequence">60</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <!-- New Criterion: Chipping Percentage for Brick Type A -->
        <record id="crit_chipping_pct_a" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">نسبة التثلم %-A</field>
            <field name="code">CHIPPING_PCT_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_percent_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">10</field>
            <field name="target_value">5</field>
            <field name="sequence">70</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">True</field>
            <field name="help_text">نسبة الطابوق المتثلم أو المتضرر من إجمالي العينة؛ يجب ألا تتجاوز 10٪ وفق IQS 25.</field>
        </record>

        <!-- Visual Inspection Criteria for Brick Type A -->
        <record id="crit_uniformity_a" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">التجانس-A</field>
            <field name="code">UNIFORMITY_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_degree_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">2</field>
            <field name="target_value">1</field>
            <field name="sequence">71</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">True</field>
            <field name="help_text">تقييم تجانس الطابوق: 1 = متجانس (مطابق)، أي قيمة أخرى = غير متجانس (غير مطابق) وفق IQS 25.</field>
        </record>

        <record id="crit_corners_a" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">الزوايا-A</field>
            <field name="code">CORNERS_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_degree_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">2</field>
            <field name="target_value">1</field>
            <field name="sequence">72</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">True</field>
            <field name="help_text">تقييم مطابقة الزوايا: 1 = مطابقة (مطابق)، أي قيمة أخرى = غير مطابقة (غير مطابق) وفق IQS 25.</field>
        </record>

        <record id="crit_shape_a" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">الشكل-A</field>
            <field name="code">SHAPE_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_degree_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">2</field>
            <field name="target_value">1</field>
            <field name="sequence">73</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">True</field>
            <field name="help_text">تقييم مطابقة الشكل: 1 = مطابق، أي قيمة أخرى = غير مطابق وفق IQS 25.</field>
        </record>

        <record id="crit_avg_length" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">متوسط الطول (مم)-A</field>
            <field name="code">AVG_LENGTH_A</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">240</field>
            <field name="max_value">250</field>
            <field name="target_value">245</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('LENGTH_A')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_length')])]"/>
            <field name="sequence">110</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_avg_width" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">متوسط العرض (مم)-A</field>
            <field name="code">AVG_WIDTH_A</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">116</field>
            <field name="max_value">124</field>
            <field name="target_value">120</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('WIDTH_A')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_width')])]"/>
            <field name="sequence">120</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_avg_height" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">متوسط الارتفاع (مم)-A</field>
            <field name="code">AVG_HEIGHT_A</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">73</field>
            <field name="max_value">81</field>
            <field name="target_value">77</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('HEIGHT_A')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_height')])]"/>
            <field name="sequence">130</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_avg_hole" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions"/>
            <field name="name">متوسط قطر الفتحة (مم)-A</field>
            <field name="code">AVG_HOLE_DIA_A</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">20</field>
            <field name="max_value">30</field>
            <field name="target_value">25</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('HOLE_DIA_A')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_hole_dia')])]"/>
            <field name="sequence">140</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>



        <record id="template_brick_absorption" model="lab.test.template">
            <field name="name">فحص امتصاص الماء للطابوق الطيني-A</field>
            <field name="code">BRICK_ABSORB</field>
            <field name="description">قياس امتصاص الماء بعد غمر الطابوق لمدة 24 ساعة</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">20</field>
        </record>

        <record id="crit_dry_weight" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_absorption"/>
            <field name="name">وزن جاف (غم)-A</field>
            <field name="code">DRY_WT_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_gram_ap"/>
            <field name="min_value">2000</field>
            <field name="max_value">3000</field>
            <field name="target_value">2500</field>
            <field name="sequence">10</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>


        <record id="crit_wet_weight" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_absorption"/>
            <field name="name">وزن بعد 24 ساعة (غم)-A</field>
            <field name="code">WET_WT_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_gram_ap"/>
            <field name="min_value">2200</field>
            <field name="max_value">3400</field>
            <field name="target_value">2900</field>
            <field name="sequence">20</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
            <field name="waiting_unit">hours</field>
            <field name="waiting_value">24</field>
            <field name="lock_during_wait">True</field>
            <field name="timer_scope">per_set</field>
        </record>

        <!-- نسبة الامتصاص لكل عينة منفردة -->
        <record id="crit_individual_absorption_pct" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_absorption"/>
            <field name="name">نسبة الامتصاص للعينة %-A</field>
            <field name="code">INDIVIDUAL_ABSORB_PCT_A</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_percent_ap"/>
            <field name="min_value">8</field>
            <field name="max_value">16</field>
            <field name="target_value">12</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = ((WET_WT_A - DRY_WT_A) / DRY_WT_A) * 100 if DRY_WT_A else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_dry_weight'), ref('crit_wet_weight')])]"/>
            <field name="sequence">25</field>
            <field name="is_summary_field">False</field>
            <field name="is_critical">False</field>
        </record>

        <!-- نسبة الامتصاص الإجمالية (متوسط جميع العينات) -->
        <record id="crit_absorption_pct" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_absorption"/>
            <field name="name">متوسط نسبة الامتصاص %-A</field>
            <field name="code">ABSORB_PCT_A</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_percent_ap"/>
            <field name="min_value">8</field>
            <field name="max_value">16</field>
            <field name="target_value">12</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('INDIVIDUAL_ABSORB_PCT_A') if avg_series('INDIVIDUAL_ABSORB_PCT_A') else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_individual_absorption_pct')])]"/>
            <field name="sequence">30</field>
            <field name="is_summary_field">True</field>
            <field name="is_critical">False</field>
        </record>

        <record id="template_brick_compression" model="lab.test.template">
            <field name="name">فحص مقاومة الانضغاط للطابوق الطيني-A</field>
            <field name="code">BRICK_COMP</field>
            <field name="description">قياس مقاومة الانضغاط لـ 10 طابوقات</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">30</field>
        </record>

        <record id="crit_comp_load" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_compression"/>
            <field name="name">الحمولة المسجلة (kN)-A</field>
            <field name="code">LOAD_KN_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_kilonewton_ap"/>
            <field name="min_value">350</field>
            <field name="max_value">1200</field>
            <field name="target_value">550</field>
            <field name="sequence">10</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_comp_area" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_compression"/>
            <field name="name">المساحة (مم²)-A</field>
            <field name="code">AREA_COMP_A</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_square_millimeter_ap"/>
            <field name="min_value">25000</field>
            <field name="max_value">30000</field>
            <field name="target_value">27600</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">area_value = get_criterion_from_sample_tests('AREA_A'); result = area_value if area_value is not None else 27600</field>
            <field name="sequence">20</field>
            <field name="is_required">False</field>
            <field name="is_global">False</field>
            <field name="is_critical">False</field>
        </record>

        <!-- Individual compression strength for each sample -->
        <record id="crit_individual_comp_strength_a" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_compression"/>
            <field name="name">مقاومة الانضغاط للعينة (N/mm²)-A</field>
            <field name="code">INDIVIDUAL_COMP_STRENGTH_A</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_newton_per_mm2_ap"/>
            <field name="min_value">12</field>
            <field name="max_value">50</field>
            <field name="target_value">20</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = (LOAD_KN_A * 1000) / AREA_COMP_A if AREA_COMP_A else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_comp_load'), ref('crit_comp_area')])]"/>
            <field name="sequence">25</field>
            <field name="is_summary_field">False</field>
            <field name="is_critical">False</field>
        </record>

        <!-- Average compression strength (summary) -->
        <record id="crit_comp_strength" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_compression"/>
            <field name="name">متوسط مقاومة الانضغاط (N/mm²)-A</field>
            <field name="code">COMP_STRENGTH_A</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_newton_per_mm2_ap"/>
            <field name="min_value">12</field>
            <field name="max_value">50</field>
            <field name="target_value">20</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('INDIVIDUAL_COMP_STRENGTH_A') if avg_series('INDIVIDUAL_COMP_STRENGTH_A') else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_individual_comp_strength_a')])]"/>
            <field name="sequence">30</field>
            <field name="is_summary_field">True</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
        </record>

        <record id="template_brick_efflorescence" model="lab.test.template">
            <field name="name">فحص التزهر للطابوق الطيني-A</field>
            <field name="code">BRICK_EFFLOR</field>
            <field name="description">تقييم التزهر بعد النقع 7 أيام والتجفيف 3 أيام. 
- درجة التزهر: 1 = لا يوجد، 2 = خفيف، 3 = متوسط، 4 = عالي
- للنوع A: يجب أن تكون درجة التزهر خفيفة (2) أو لا يوجد (1)
- للنوع B: يجب أن تكون درجة التزهر متوسطة (3) أو أقل
- للنوع C: يجب أن لا يكون هناك تزهر (1)</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">40</field>
        </record>

        <record id="crit_efflorescence" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_efflorescence"/>
            <field name="name">درجة التزهر-A</field>
            <field name="code">EFFLOR_GRADE_A</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_degree_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">2</field>
            <field name="target_value">1</field>
            <field name="sequence">10</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="help_text">درجات التزهر: 1 = لا يوجد، 2 = خفيف، 3 = متوسط، 4 = عالي
مطابقة النتيجة تعتمد على نوع العينة الفرعي (A/B/C)</field>
        </record>
                <record id="template_brick_dimensions_b" model="lab.test.template">
            <field name="name">فحص قياسات الطابوق الطيني-B</field>
            <field name="code">BRICK_DIMENS_B</field>
            <field name="description">فحص الطول والعرض والارتفاع وقطر الثقوب للطابوق الطيني حسب IQS 25</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">10</field>
        </record>

        <record id="crit_brick_length_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">الطول (مم)-B</field>
            <field name="code">LENGTH_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">232.8</field>
            <field name="max_value">247.2</field>
            <field name="target_value">240</field>
            <field name="sequence">10</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_width_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">العرض (مم)-B</field>
            <field name="code">WIDTH_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">115</field>
            <field name="max_value">121.54</field>
            <field name="target_value">118</field>
            <field name="sequence">20</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_height_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">الارتفاع (مم)-B</field>
            <field name="code">HEIGHT_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">73</field>
            <field name="max_value">77</field>
            <field name="target_value">75</field>
            <field name="sequence">30</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_hole_dia_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">قطر الفتحة (مم)-B</field>
            <field name="code">HOLE_DIA_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">8</field>
            <field name="max_value">25</field>
            <field name="target_value">12</field>
            <field name="sequence">40</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_hole_count_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">عدد الفتحات-B</field>
            <field name="code">HOLE_COUNT_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_unit"/>
            <field name="min_value">15</field>
            <field name="max_value">25</field>
            <field name="target_value">19</field>
            <field name="sequence">45</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <!-- New Criterion: Chipping Percentage for Brick Type B -->
        <record id="crit_chipping_pct_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">نسبة التثلم %-B</field>
            <field name="code">CHIPPING_PCT_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_percent_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">10</field>
            <field name="target_value">5</field>
            <field name="sequence">50</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">True</field>
            <field name="help_text">نسبة الطابوق المتثلم أو المتضرر من إجمالي العينة؛ يجب ألا تتجاوز 10٪ وفق IQS 25.</field>
        </record>

        <!-- Visual Inspection Criteria for Brick Type B -->
        <record id="crit_uniformity_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">التجانس-B</field>
            <field name="code">UNIFORMITY_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_degree_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">2</field>
            <field name="target_value">1</field>
            <field name="sequence">51</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">True</field>
            <field name="help_text">تقييم تجانس الطابوق: 1 = متجانس (مطابق)، أي قيمة أخرى = غير متجانس (غير مطابق) وفق IQS 25.</field>
        </record>

        <record id="crit_corners_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">الزوايا-B</field>
            <field name="code">CORNERS_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_degree_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">2</field>
            <field name="target_value">1</field>
            <field name="sequence">52</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">True</field>
            <field name="help_text">تقييم مطابقة الزوايا: 1 = مطابقة (مطابق)، أي قيمة أخرى = غير مطابقة (غير مطابق) وفق IQS 25.</field>
        </record>

        <record id="crit_shape_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">الشكل-B</field>
            <field name="code">SHAPE_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_degree_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">2</field>
            <field name="target_value">1</field>
            <field name="sequence">53</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">True</field>
            <field name="help_text">تقييم مطابقة الشكل: 1 = مطابق، أي قيمة أخرى = غير مطابق وفق IQS 25.</field>
        </record>


        <record id="brick_test_flow_template" model="lab.test.flow.template">
            <field name="name">خطة فحص طابوق طيني متعددة المراحل_A</field>
            <field name="description">قياسات → امتصاص → انضغاط → تزهر</field>
            <field name="allow_parallel_tests" eval="True"/>
        </record>


        <record id="brick_test_flow_stage1" model="lab.test.flow.template.line">
            <field name="template_id" ref="brick_test_flow_template"/>
            <field name="sequence">10</field>
            <field name="test_template_id" ref="template_brick_dimensions"/>
            <field name="sample_qty">24</field>
        </record>

        <record id="brick_test_flow_stage2" model="lab.test.flow.template.line">
            <field name="template_id" ref="brick_test_flow_template"/>
            <field name="sequence">20</field>
            <field name="test_template_id" ref="template_brick_absorption"/>
            <field name="sample_qty">10</field>
        </record>

        <record id="brick_test_flow_stage3" model="lab.test.flow.template.line">
            <field name="template_id" ref="brick_test_flow_template"/>
            <field name="sequence">30</field>
            <field name="test_template_id" ref="template_brick_compression"/>
            <field name="sample_qty">10</field>
        </record>

        <record id="brick_test_flow_stage4" model="lab.test.flow.template.line">
            <field name="template_id" ref="brick_test_flow_template"/>
            <field name="sequence">40</field>
            <field name="test_template_id" ref="template_brick_efflorescence"/>
            <field name="sample_qty">1</field>
        </record>

        <!-- B Templates Section -->
        <record id="template_brick_dimensions_b" model="lab.test.template">
            <field name="name">فحص قياسات الطابوق الطيني-B</field>
            <field name="code">BRICK_DIMENS_B</field>
            <field name="description">فحص الطول والعرض والارتفاع وقطر الثقوب للطابوق الطيني حسب IQS 25</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">10</field>
        </record>

        <record id="crit_brick_length_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">الطول (مم)-B</field>
            <field name="code">LENGTH_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">232.8</field>
            <field name="max_value">247.2</field>
            <field name="target_value">240</field>
            <field name="sequence">10</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_width_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">العرض (مم)-B</field>
            <field name="code">WIDTH_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">115</field>
            <field name="max_value">121.54</field>
            <field name="target_value">118</field>
            <field name="sequence">20</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_height_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">الارتفاع (مم)-B</field>
            <field name="code">HEIGHT_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">73</field>
            <field name="max_value">77</field>
            <field name="target_value">75</field>
            <field name="sequence">30</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_hole_dia_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">قطر الفتحة (مم)-B</field>
            <field name="code">HOLE_DIA_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">8</field>
            <field name="max_value">25</field>
            <field name="target_value">12</field>
            <field name="sequence">40</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_hole_count_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">عدد الفتحات-B</field>
            <field name="code">HOLE_COUNT_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_unit"/>
            <field name="min_value">15</field>
            <field name="max_value">25</field>
            <field name="target_value">19</field>
            <field name="sequence">45</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_area_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">المساحة (ممº)-B</field>
            <field name="code">AREA_B</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_square_millimeter_ap"/>
            <field name="min_value">25000</field>
            <field name="max_value">30000</field>
            <field name="target_value">27600</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('LENGTH_B') * avg_series('WIDTH_B')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_length_b'), ref('crit_brick_width_b')])]"/>
            <field name="sequence">50</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_brick_void_ratio_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">نسبة الفتحات (%)-B</field>
            <field name="code">VOID_RATIO_B</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_percent_ap"/>
            <field name="min_value">25</field>
            <field name="max_value">35</field>
            <field name="target_value">30</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = (pow(avg_series('HOLE_DIA_B'), 2) * 3.1416 / 4 * avg_series('HOLE_COUNT_B')) / (avg_series('LENGTH_B') * avg_series('WIDTH_B')) * 100 if (avg_series('LENGTH_B') and avg_series('WIDTH_B') and avg_series('HOLE_COUNT_B')) else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_hole_dia_b'), ref('crit_brick_hole_count_b'), ref('crit_brick_length_b'), ref('crit_brick_width_b')])]"/>
            <field name="sequence">60</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_avg_length_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">متوسط الطول (مم)-B</field>
            <field name="code">AVG_LENGTH_B</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">240</field>
            <field name="max_value">250</field>
            <field name="target_value">245</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('LENGTH_B')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_length_b')])]"/>
            <field name="sequence">110</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_avg_width_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">متوسط العرض (مم)-B</field>
            <field name="code">AVG_WIDTH_B</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">116</field>
            <field name="max_value">124</field>
            <field name="target_value">120</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('WIDTH_B')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_width_b')])]"/>
            <field name="sequence">120</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_avg_height_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">متوسط الارتفاع (مم)-B</field>
            <field name="code">AVG_HEIGHT_B</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">73</field>
            <field name="max_value">81</field>
            <field name="target_value">77</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('HEIGHT_B')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_height_b')])]"/>
            <field name="sequence">130</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_avg_hole_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_b"/>
            <field name="name">متوسط قطر الفتحة (مم)-B</field>
            <field name="code">AVG_HOLE_DIA_B</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">20</field>
            <field name="max_value">30</field>
            <field name="target_value">25</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('HOLE_DIA_B')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_hole_dia_b')])]"/>
            <field name="sequence">140</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <!-- B Absorption Template -->
        <record id="template_brick_absorption_b" model="lab.test.template">
            <field name="name">فحص امتصاص الماء للطابوق الطيني-B</field>
            <field name="code">BRICK_ABSORB_B</field>
            <field name="description">قياس امتصاص الماء بعد غمر الطابوق لمدة 24 ساعة</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">20</field>
        </record>

        <record id="crit_dry_weight_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_absorption_b"/>
            <field name="name">وزن جاف (غم)-B</field>
            <field name="code">DRY_WT_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_gram_ap"/>
            <field name="min_value">2000</field>
            <field name="max_value">3000</field>
            <field name="target_value">2500</field>
            <field name="sequence">10</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_wet_weight_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_absorption_b"/>
            <field name="name">وزن بعد 24 ساعة (غم)-B</field>
            <field name="code">WET_WT_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_gram_ap"/>
            <field name="min_value">2200</field>
            <field name="max_value">3400</field>
            <field name="target_value">2900</field>
            <field name="sequence">20</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
            <field name="waiting_unit">hours</field>
            <field name="waiting_value">24</field>
            <field name="lock_during_wait">True</field>
            <field name="timer_scope">per_set</field>
        </record>

        <!-- نسبة الامتصاص لكل عينة منفردة -->
        <record id="crit_individual_absorption_pct_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_absorption_b"/>
            <field name="name">نسبة الامتصاص للعينة %-B</field>
            <field name="code">INDIVIDUAL_ABSORB_PCT_B</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_percent_ap"/>
            <field name="min_value">8</field>
            <field name="max_value">16</field>
            <field name="target_value">12</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = ((WET_WT_B - DRY_WT_B) / DRY_WT_B) * 100 if DRY_WT_B else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_dry_weight_b'), ref('crit_wet_weight_b')])]"/>
            <field name="sequence">25</field>
            <field name="is_summary_field">False</field>
            <field name="is_critical">False</field>
        </record>

        <!-- نسبة الامتصاص الإجمالية (متوسط جميع العينات) -->
        <record id="crit_absorption_pct_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_absorption_b"/>
            <field name="name">متوسط نسبة الامتصاص %-B</field>
            <field name="code">ABSORB_PCT_B</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_percent_ap"/>
            <field name="min_value">8</field>
            <field name="max_value">16</field>
            <field name="target_value">12</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('INDIVIDUAL_ABSORB_PCT_B') if avg_series('INDIVIDUAL_ABSORB_PCT_B') else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_individual_absorption_pct_b')])]"/>
            <field name="sequence">30</field>
            <field name="is_summary_field">True</field>
            <field name="is_critical">False</field>
        </record>

        <!-- B Compression Template -->
        <record id="template_brick_compression_b" model="lab.test.template">
            <field name="name">فحص مقاومة الانضغاط للطابوق الطيني-B</field>
            <field name="code">BRICK_COMP_B</field>
            <field name="description">قياس مقاومة الانضغاط لـ 10 طابوقات</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">30</field>
        </record>

        <record id="crit_comp_load_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_compression_b"/>
            <field name="name">الحمولة المسجلة (kN)-B</field>
            <field name="code">LOAD_KN_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_kilonewton_ap"/>
            <field name="min_value">350</field>
            <field name="max_value">1200</field>
            <field name="target_value">550</field>
            <field name="sequence">10</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_comp_area_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_compression_b"/>
            <field name="name">المساحة (مم²)-B</field>
            <field name="code">AREA_COMP_B</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_square_millimeter_ap"/>
            <field name="min_value">25000</field>
            <field name="max_value">30000</field>
            <field name="target_value">27600</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">area_value = get_criterion_from_sample_tests('AREA_B'); result = area_value if area_value is not None else 27600</field>
            <field name="sequence">20</field>
            <field name="is_required">False</field>
            <field name="is_global">False</field>
            <field name="is_critical">False</field>
        </record>

        <!-- Individual compression strength for each sample -->
        <record id="crit_individual_comp_strength_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_compression_b"/>
            <field name="name">مقاومة الانضغاط للعينة (N/mm²)-B</field>
            <field name="code">INDIVIDUAL_COMP_STRENGTH_B</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_newton_per_mm2_ap"/>
            <field name="min_value">12</field>
            <field name="max_value">50</field>
            <field name="target_value">20</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = (LOAD_KN_B * 1000) / AREA_COMP_B if AREA_COMP_B else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_comp_load_b'), ref('crit_comp_area_b')])]"/>
            <field name="sequence">25</field>
            <field name="is_summary_field">False</field>
            <field name="is_critical">False</field>
        </record>

        <!-- Average compression strength (summary) -->
        <record id="crit_comp_strength_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_compression_b"/>
            <field name="name">متوسط مقاومة الانضغاط (N/mm²)-B</field>
            <field name="code">COMP_STRENGTH_B</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_newton_per_mm2_ap"/>
            <field name="min_value">12</field>
            <field name="max_value">50</field>
            <field name="target_value">20</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('INDIVIDUAL_COMP_STRENGTH_B') if avg_series('INDIVIDUAL_COMP_STRENGTH_B') else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_individual_comp_strength_b')])]"/>
            <field name="sequence">30</field>
            <field name="is_summary_field">True</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
        </record>

        <!-- B Efflorescence Template -->
        <record id="template_brick_efflorescence_b" model="lab.test.template">
            <field name="name">فحص التزهر للطابوق الطيني-B</field>
            <field name="code">BRICK_EFFLOR_B</field>
            <field name="description">تقييم التزهر بعد النقع 7 أيام والتجفيف 3 أيام</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">40</field>
        </record>

        <record id="crit_efflorescence_b" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_efflorescence_b"/>
            <field name="name">درجة التزهر-B</field>
            <field name="code">EFFLOR_GRADE_B</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_degree_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">2</field>
            <field name="target_value">1</field>
            <field name="sequence">10</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="help_text">درجات التزهر: 1 = لا يوجد، 2 = خفيف، 3 = متوسط، 4 = عالي</field>
        </record>

        <!-- B Flow Template -->
        <record id="brick_test_flow_template_B" model="lab.test.flow.template">
            <field name="name">خطة فحص طابوق طيني متعددة المراحل_B</field>
            <field name="description">قياسات → امتصاص → انضغاط → تزهر</field>
            <field name="allow_parallel_tests" eval="True"/>
        </record>

        <record id="brick_test_flow_stage1_b" model="lab.test.flow.template.line">
            <field name="template_id" ref="brick_test_flow_template_B"/>
            <field name="sequence">10</field>
            <field name="test_template_id" ref="template_brick_dimensions_b"/>
            <field name="sample_qty">24</field>
        </record>

        <record id="brick_test_flow_stage2_b" model="lab.test.flow.template.line">
            <field name="template_id" ref="brick_test_flow_template_B"/>
            <field name="sequence">20</field>
            <field name="test_template_id" ref="template_brick_absorption_b"/>
            <field name="sample_qty">10</field>
        </record>

        <record id="brick_test_flow_stage3_b" model="lab.test.flow.template.line">
            <field name="template_id" ref="brick_test_flow_template_B"/>
            <field name="sequence">30</field>
            <field name="test_template_id" ref="template_brick_compression_b"/>
            <field name="sample_qty">10</field>
        </record>

        <record id="brick_test_flow_stage4_b" model="lab.test.flow.template.line">
            <field name="template_id" ref="brick_test_flow_template_B"/>
            <field name="sequence">40</field>
            <field name="test_template_id" ref="template_brick_efflorescence_b"/>
            <field name="sample_qty">1</field>
        </record>

        <!-- Sample Types and Subtypes -->
        <record id="masonry_type" model="lab.sample.type">
            <field name="name">طابوق</field>
            <field name="code">MASONRY</field>
            <field name="description">أنواع الطابوق المختلفة</field>
            <field name="sequence">30</field>
        </record>

        <record id="masonry_subtype_a" model="lab.sample.subtype">
            <field name="name">طابوق نوع A</field>
            <field name="code">A</field>
            <field name="sample_type_id" ref="masonry_type"/>
            <field name="description">طابوق من الدرجة الأولى</field>
            <field name="efflorescence_level">light</field>
            <field name="allowed_efflorescence_values">1,2</field>
            <field name="sequence">10</field>
        </record>

        <record id="masonry_subtype_b" model="lab.sample.subtype">
            <field name="name">طابوق نوع B</field>
            <field name="code">B</field>
            <field name="sample_type_id" ref="masonry_type"/>
            <field name="description">طابوق من الدرجة الثانية</field>
            <field name="efflorescence_level">medium</field>
            <field name="allowed_efflorescence_values">1,2,3</field>
            <field name="sequence">20</field>
        </record>

        <record id="masonry_subtype_c" model="lab.sample.subtype">
            <field name="name">طابوق نوع C</field>
            <field name="code">C</field>
            <field name="sample_type_id" ref="masonry_type"/>
            <field name="description">طابوق من الدرجة الثالثة</field>
            <field name="efflorescence_level">none</field>
            <field name="allowed_efflorescence_values">1</field>
            <field name="sequence">30</field>
        </record>


        <record id="product_concrete_cube_sample" model="product.template">
            <field name="name">عينات مكعبات - خرسانة</field>
            <field name="type">consu</field>
            <field name="is_sample_product">True</field>
            <field name="tracking">serial</field>
            <field name="hole_count">1</field>
            <field name="categ_id" ref="product.product_category_all"/>
        </record>




        <record id="uom_categ_volume_ap" model="uom.category">
            <field name="name">الحجم</field>
        </record>
        
        <record id="uom_categ_density_ap" model="uom.category">
            <field name="name">الكثافة</field>
        </record>


        <record id="uom_cubic_meter_ap" model="uom.uom">
            <field name="name">م³</field>
            <field name="category_id" ref="uom_categ_volume_ap"/>
            <field name="factor" eval="1.0"/>
            <field name="rounding" eval="0.000001"/>
            <field name="uom_type">reference</field>
        </record>

        <record id="uom_kg_per_cubic_meter_ap" model="uom.uom">
            <field name="name">كغم/م³</field>
            <field name="category_id" ref="uom_categ_density_ap"/>
            <field name="factor" eval="1.0"/>
            <field name="uom_type">reference</field>
        </record>


        <record id="template_concrete_compression" model="lab.test.template">
            <field name="name">فحص مقاومة الانضغاط للخرسانة</field>
            <field name="code">CONCRETE_COMP</field>
            <field name="description">فحص مقاومة الانضغاط لمكعبات الخرسانة وحساب الكثافة والخصائص الفيزيائية</field>
            <field name="standard_code">ASTM C39, BS EN 12390-3</field>
            <field name="industry_type">concrete</field>
            <field name="state">active</field>
            <field name="sequence">50</field>
        </record>

        
        <record id="crit_concrete_weight" model="lab.test.criterion">
            <field name="template_id" ref="template_concrete_compression"/>
            <field name="name">الوزن (كغم)</field>
            <field name="code">WEIGHT_CONCRETE</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_kilogram_ap"/>
            <field name="min_value">7.0</field>
            <field name="max_value">10.0</field>
            <field name="target_value">8.1</field>
            <field name="sequence">10</field>
            <field name="is_required">True</field>
            <field name="is_critical">False</field>
            <field name="is_global">False</field>
            <field name="is_summary_field">False</field>
        </record>


        <record id="crit_concrete_density_final" model="lab.test.criterion">
            <field name="template_id" ref="template_concrete_compression"/>
            <field name="name">الكثافة (كغم/م³)</field>
            <field name="code">DENSITY_CONCRETE</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_kg_per_cubic_meter_ap"/>
            <field name="min_value">2000</field>
            <field name="max_value">2600</field>
            <field name="target_value">2400</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = round((WEIGHT_CONCRETE / 0.003375) / 10) * 10 if WEIGHT_CONCRETE else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_concrete_weight')])]"/>
            <field name="sequence">30</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
            <field name="is_global">False</field>
            <field name="is_summary_field">False</field>
        </record>


        <record id="crit_concrete_load" model="lab.test.criterion">
            <field name="template_id" ref="template_concrete_compression"/>
            <field name="name">وزن الحمل (كيلو نيوتن)</field>
            <field name="code">LOAD_KN_CONCRETE</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_kilonewton_ap"/>
            <field name="min_value">400</field>
            <field name="max_value">1500</field>
            <field name="target_value">675</field>
            <field name="sequence">40</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">False</field>
            <field name="is_summary_field">False</field>
        </record>

        <record id="crit_concrete_compressive_strength" model="lab.test.criterion">
            <field name="template_id" ref="template_concrete_compression"/>
            <field name="name">قوة الضغط (نيوتن/مم²)</field>
            <field name="code">COMP_STRENGTH_CONCRETE</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_newton_per_mm2_ap"/>
            <field name="min_value">20</field>
            <field name="max_value">60</field>
            <field name="target_value">30</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = (LOAD_KN_CONCRETE * 1000) / 22500 if LOAD_KN_CONCRETE else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_concrete_load')])]"/>
            <field name="sequence">50</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">False</field>
            <field name="is_summary_field">False</field>
        </record>


        <record id="crit_concrete_avg_compressive_strength" model="lab.test.criterion">
            <field name="template_id" ref="template_concrete_compression"/>
            <field name="name">متوسط قوة الضغط (نيوتن/مم²)</field>
            <field name="code">AVG_COMP_STRENGTH_CONCRETE</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_newton_per_mm2_ap"/>
            <field name="min_value">20</field>
            <field name="max_value">60</field>
            <field name="target_value">30</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = multiply_by_factor(avg_series('COMP_STRENGTH_CONCRETE')) if avg_series('COMP_STRENGTH_CONCRETE') else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_concrete_compressive_strength')])]"/>
            <field name="sequence">1000</field>
            <field name="is_required">False</field>
            <field name="is_critical">True</field>
            <field name="is_global">False</field>
            <field name="is_summary_field">True</field>
        </record>


        <!-- وحدات القياس الجديدة للركام -->
        <record id="uom_categ_sieve_ap" model="uom.category">
            <field name="name">أقطار المناخل</field>
        </record>

        <!-- الوحدة المرجعية للمليمتر -->
        <record id="uom_millimeter_sieve_ap" model="uom.uom">
            <field name="name">مم</field>
            <field name="category_id" ref="uom_categ_sieve_ap"/>
            <field name="factor" eval="1.0"/>
            <field name="uom_type">reference</field>
        </record>

        <record id="uom_micrometer_ap" model="uom.uom">
            <field name="name">μm</field>
            <field name="category_id" ref="uom_categ_sieve_ap"/>
            <field name="factor" eval="1000.0"/>
            <field name="uom_type">smaller</field>
        </record>

        <record id="uom_categ_modulus_ap" model="uom.category">
            <field name="name">معامل النعومة</field>
        </record>

        <record id="uom_fineness_modulus_ap" model="uom.uom">
            <field name="name">معامل</field>
            <field name="category_id" ref="uom_categ_modulus_ap"/>
            <field name="factor" eval="1.0"/>
            <field name="uom_type">reference</field>
        </record>


        <!-- ==================== TYPE C DATA - COPIED FROM TYPE B ==================== -->
        
        <!-- C Templates Section -->
        <record id="template_brick_dimensions_c" model="lab.test.template">
            <field name="name">فحص قياسات الطابوق الطيني-C</field>
            <field name="code">BRICK_DIMENS_C</field>
            <field name="description">فحص الطول والعرض والارتفاع وقطر الثقوب للطابوق الطيني حسب IQS 25</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">10</field>
        </record>

        <record id="crit_brick_length_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">الطول (مم)</field>
            <field name="code">LENGTH_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">232.8</field>
            <field name="max_value">247.2</field>
            <field name="target_value">240</field>
            <field name="sequence">10</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_width_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">العرض (مم)</field>
            <field name="code">WIDTH_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">115</field>
            <field name="max_value">121.54</field>
            <field name="target_value">118</field>
            <field name="sequence">20</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_height_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">الارتفاع (مم)</field>
            <field name="code">HEIGHT_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">73</field>
            <field name="max_value">77</field>
            <field name="target_value">75</field>
            <field name="sequence">30</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_hole_dia_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">قطر الفتحة (مم)</field>
            <field name="code">HOLE_DIA_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">8</field>
            <field name="max_value">25</field>
            <field name="target_value">12</field>
            <field name="sequence">40</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_brick_hole_count_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">عدد الفتحات</field>
            <field name="code">HOLE_COUNT_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_unit"/>
            <field name="min_value">15</field>
            <field name="max_value">25</field>
            <field name="target_value">19</field>
            <field name="sequence">45</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <!-- New Criterion: Chipping Percentage for Brick Type C -->
        <record id="crit_chipping_pct_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">نسبة التثلم %</field>
            <field name="code">CHIPPING_PCT_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_percent_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">10</field>
            <field name="target_value">5</field>
            <field name="sequence">50</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">True</field>
            <field name="help_text">نسبة الطابوق المتثلم أو المتضرر من إجمالي العينة؛ يجب ألا تتجاوز 10٪ وفق IQS 25.</field>
        </record>

        <!-- Visual Inspection Criteria for Brick Type C -->
        <record id="crit_uniformity_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">التجانس</field>
            <field name="code">UNIFORMITY_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_degree_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">2</field>
            <field name="target_value">1</field>
            <field name="sequence">51</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">True</field>
            <field name="help_text">تقييم تجانس الطابوق: 1 = متجانس (مطابق)، أي قيمة أخرى = غير متجانس (غير مطابق) وفق IQS 25.</field>
        </record>

        <record id="crit_corners_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">الزوايا</field>
            <field name="code">CORNERS_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_degree_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">2</field>
            <field name="target_value">1</field>
            <field name="sequence">52</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">True</field>
            <field name="help_text">تقييم مطابقة الزوايا: 1 = مطابقة (مطابق)، أي قيمة أخرى = غير مطابقة (غير مطابق) وفق IQS 25.</field>
        </record>

        <record id="crit_shape_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">الشكل</field>
            <field name="code">SHAPE_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_degree_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">2</field>
            <field name="target_value">1</field>
            <field name="sequence">53</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="is_global">True</field>
            <field name="help_text">تقييم مطابقة الشكل: 1 = مطابق، أي قيمة أخرى = غير مطابق وفق IQS 25.</field>
        </record>

        <record id="crit_brick_area_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">المساحة (ممº)</field>
            <field name="code">AREA_C</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_square_millimeter_ap"/>
            <field name="min_value">25000</field>
            <field name="max_value">30000</field>
            <field name="target_value">27600</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('LENGTH_C') * avg_series('WIDTH_C')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_length_c'), ref('crit_brick_width_c')])]"/>
            <field name="sequence">50</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_brick_void_ratio_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">نسبة الفتحات (%)</field>
            <field name="code">VOID_RATIO_C</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_percent_ap"/>
            <field name="min_value">25</field>
            <field name="max_value">35</field>
            <field name="target_value">30</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = (pow(avg_series('HOLE_DIA_C'), 2) * 3.1416 / 4 * avg_series('HOLE_COUNT_C')) / (avg_series('LENGTH_C') * avg_series('WIDTH_C')) * 100 if (avg_series('LENGTH_C') and avg_series('WIDTH_C') and avg_series('HOLE_COUNT_C')) else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_hole_dia_c'), ref('crit_brick_hole_count_c'), ref('crit_brick_length_c'), ref('crit_brick_width_c')])]"/>
            <field name="sequence">60</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_avg_length_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">متوسط الطول (مم)</field>
            <field name="code">AVG_LENGTH_C</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">240</field>
            <field name="max_value">250</field>
            <field name="target_value">245</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('LENGTH_C')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_length_c')])]"/>
            <field name="sequence">110</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_avg_width_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">متوسط العرض (مم)</field>
            <field name="code">AVG_WIDTH_C</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">116</field>
            <field name="max_value">124</field>
            <field name="target_value">120</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('WIDTH_C')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_width_c')])]"/>
            <field name="sequence">120</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_avg_height_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">متوسط الارتفاع (مم)</field>
            <field name="code">AVG_HEIGHT_C</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">73</field>
            <field name="max_value">81</field>
            <field name="target_value">77</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('HEIGHT_C')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_height_c')])]"/>
            <field name="sequence">130</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <record id="crit_avg_hole_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_dimensions_c"/>
            <field name="name">متوسط قطر الفتحة (مم)</field>
            <field name="code">AVG_HOLE_DIA_C</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="min_value">20</field>
            <field name="max_value">30</field>
            <field name="target_value">25</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('HOLE_DIA_C')</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_brick_hole_dia_c')])]"/>
            <field name="sequence">140</field>
            <field name="is_critical">True</field>
            <field name="is_summary_field">True</field>
        </record>

        <!-- C Absorption Template -->
        <record id="template_brick_absorption_c" model="lab.test.template">
            <field name="name">فحص امتصاص الماء للطابوق الطيني</field>
            <field name="code">BRICK_ABSORB_C</field>
            <field name="description">قياس امتصاص الماء بعد غمر الطابوق لمدة 24 ساعة</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">20</field>
        </record>

        <record id="crit_dry_weight_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_absorption_c"/>
            <field name="name">وزن جاف (غم)</field>
            <field name="code">DRY_WT_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_gram_ap"/>
            <field name="min_value">2000</field>
            <field name="max_value">3000</field>
            <field name="target_value">2500</field>
            <field name="sequence">10</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_wet_weight_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_absorption_c"/>
            <field name="name">وزن بعد 24 ساعة (غم)</field>
            <field name="code">WET_WT_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_gram_ap"/>
            <field name="min_value">2200</field>
            <field name="max_value">3400</field>
            <field name="target_value">2900</field>
            <field name="sequence">20</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
            <field name="waiting_unit">hours</field>
            <field name="waiting_value">24</field>
            <field name="lock_during_wait">True</field>
            <field name="timer_scope">per_set</field>
        </record>

        <!-- نسبة الامتصاص لكل عينة منفردة -->
        <record id="crit_individual_absorption_pct_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_absorption_c"/>
            <field name="name">نسبة الامتصاص للعينة %</field>
            <field name="code">INDIVIDUAL_ABSORB_PCT_C</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_percent_ap"/>
            <field name="min_value">8</field>
            <field name="max_value">16</field>
            <field name="target_value">12</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = ((WET_WT_C - DRY_WT_C) / DRY_WT_C) * 100 if DRY_WT_C else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_dry_weight_c'), ref('crit_wet_weight_c')])]"/>
            <field name="sequence">25</field>
            <field name="is_summary_field">False</field>
            <field name="is_critical">False</field>
        </record>

        <!-- نسبة الامتصاص الإجمالية (متوسط جميع العينات) -->
        <record id="crit_absorption_pct_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_absorption_c"/>
            <field name="name">متوسط نسبة الامتصاص %</field>
            <field name="code">ABSORB_PCT_C</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_percent_ap"/>
            <field name="min_value">8</field>
            <field name="max_value">16</field>
            <field name="target_value">12</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('INDIVIDUAL_ABSORB_PCT_C') if avg_series('INDIVIDUAL_ABSORB_PCT_C') else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_individual_absorption_pct_c')])]"/>
            <field name="sequence">30</field>
            <field name="is_summary_field">True</field>
            <field name="is_critical">False</field>
        </record>

        <!-- C Compression Template -->
        <record id="template_brick_compression_c" model="lab.test.template">
            <field name="name">فحص مقاومة الانضغاط للطابوق الطيني</field>
            <field name="code">BRICK_COMP_C</field>
            <field name="description">قياس مقاومة الانضغاط لـ 10 طابوقات</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">30</field>
        </record>

        <record id="crit_comp_load_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_compression_c"/>
            <field name="name">الحمولة المسجلة (kN)</field>
            <field name="code">LOAD_KN_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_kilonewton_ap"/>
            <field name="min_value">350</field>
            <field name="max_value">1200</field>
            <field name="target_value">550</field>
            <field name="sequence">10</field>
            <field name="is_required">False</field>
            <field name="is_critical">False</field>
        </record>

        <record id="crit_comp_area_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_compression_c"/>
            <field name="name">المساحة (مم²)</field>
            <field name="code">AREA_COMP_C</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_square_millimeter_ap"/>
            <field name="min_value">25000</field>
            <field name="max_value">30000</field>
            <field name="target_value">27600</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">area_value = get_criterion_from_sample_tests('AREA_C'); result = area_value if area_value is not None else 27600</field>
            <field name="sequence">20</field>
            <field name="is_required">False</field>
            <field name="is_global">False</field>
            <field name="is_critical">False</field>
        </record>

        <!-- Individual compression strength for each sample -->
        <record id="crit_individual_comp_strength_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_compression_c"/>
            <field name="name">مقاومة الانضغاط للعينة (N/mm²)</field>
            <field name="code">INDIVIDUAL_COMP_STRENGTH_C</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_newton_per_mm2_ap"/>
            <field name="min_value">12</field>
            <field name="max_value">50</field>
            <field name="target_value">20</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = (LOAD_KN_C * 1000) / AREA_COMP_C if AREA_COMP_C else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_comp_load_c'), ref('crit_comp_area_c')])]"/>
            <field name="sequence">25</field>
            <field name="is_summary_field">False</field>
            <field name="is_critical">False</field>
        </record>

        <!-- Average compression strength (summary) -->
        <record id="crit_comp_strength_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_compression_c"/>
            <field name="name">متوسط مقاومة الانضغاط (N/mm²)</field>
            <field name="code">COMP_STRENGTH_C</field>
            <field name="test_type">computed</field>
            <field name="uom_id" ref="appointment_products.uom_newton_per_mm2_ap"/>
            <field name="min_value">12</field>
            <field name="max_value">50</field>
            <field name="target_value">20</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = avg_series('INDIVIDUAL_COMP_STRENGTH_C') if avg_series('INDIVIDUAL_COMP_STRENGTH_C') else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_individual_comp_strength_c')])]"/>
            <field name="sequence">30</field>
            <field name="is_summary_field">True</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
        </record>

        <!-- C Efflorescence Template -->
        <record id="template_brick_efflorescence_c" model="lab.test.template">
            <field name="name">فحص التزهر للطابوق الطيني</field>
            <field name="code">BRICK_EFFLOR_C</field>
            <field name="description">تقييم التزهر بعد النقع 7 أيام والتجفيف 3 أيام</field>
            <field name="standard_code">IQS 25</field>
            <field name="industry_type">masonry</field>
            <field name="state">active</field>
            <field name="sequence">40</field>
        </record>

        <record id="crit_efflorescence_c" model="lab.test.criterion">
            <field name="template_id" ref="template_brick_efflorescence_c"/>
            <field name="name">درجة التزهر</field>
            <field name="code">EFFLOR_GRADE_C</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_degree_ap"/>
            <field name="min_value">1</field>
            <field name="max_value">2</field>
            <field name="target_value">1</field>
            <field name="sequence">10</field>
            <field name="is_required">True</field>
            <field name="is_critical">True</field>
            <field name="help_text">درجات التزهر: 1 = لا يوجد، 2 = خفيف، 3 = متوسط، 4 = عالي</field>
        </record>

        <!-- C Flow Template -->
        <record id="brick_test_flow_template_C" model="lab.test.flow.template">
            <field name="name">خطة فحص طابوق طيني متعددة المراحل_C</field>
            <field name="description">قياسات → امتصاص → انضغاط → تزهر</field>
            <field name="allow_parallel_tests" eval="True"/>
        </record>

        <record id="brick_test_flow_stage1_c" model="lab.test.flow.template.line">
            <field name="template_id" ref="brick_test_flow_template_C"/>
            <field name="sequence">10</field>
            <field name="test_template_id" ref="template_brick_dimensions_c"/>
            <field name="sample_qty">24</field>
        </record>

        <record id="brick_test_flow_stage2_c" model="lab.test.flow.template.line">
            <field name="template_id" ref="brick_test_flow_template_C"/>
            <field name="sequence">20</field>
            <field name="test_template_id" ref="template_brick_absorption_c"/>
            <field name="sample_qty">10</field>
        </record>

        <record id="brick_test_flow_stage3_c" model="lab.test.flow.template.line">
            <field name="template_id" ref="brick_test_flow_template_C"/>
            <field name="sequence">30</field>
            <field name="test_template_id" ref="template_brick_compression_c"/>
            <field name="sample_qty">10</field>
        </record>

        <record id="brick_test_flow_stage4_c" model="lab.test.flow.template.line">
            <field name="template_id" ref="brick_test_flow_template_C"/>
            <field name="sequence">40</field>
            <field name="test_template_id" ref="template_brick_efflorescence_c"/>
            <field name="sample_qty">1</field>
        </record>

        <!-- Product Template Demo - moved here after all flow templates are defined -->
        <record id="product_brick_sample_demo" model="product.template">
            <field name="name">العينة - طابوق طيني</field>
            <field name="type">consu</field>
            <field name="is_sample_product">True</field>
            <field name="tracking">serial</field>
            <field name="sample_type_id" ref="masonry_type"/>
            <field name="test_flow_template_id" ref="brick_test_flow_template"/>
            <field name="subtype_test_plans_json" eval="'{&quot;' + str(ref('masonry_subtype_a')) + '&quot;: ' + str(ref('brick_test_flow_template')) + ', &quot;' + str(ref('masonry_subtype_b')) + '&quot;: ' + str(ref('brick_test_flow_template_B')) + ', &quot;' + str(ref('masonry_subtype_c')) + '&quot;: ' + str(ref('brick_test_flow_template_C')) + '}'"/>
            <field name="hole_count">10</field>
            <field name="categ_id" ref="product.product_category_all"/>
        </record>





    </data>
</odoo> 