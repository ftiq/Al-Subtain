<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">

        <record id="ignitability_sample_type" model="lab.sample.type">
            <field name="name">قابلية الاشتعال</field>
            <field name="code">IGNITABILITY</field>
            <field name="description">نوع عينة خاص باختبارات قابلية الاشتعال (ISO 11925-2)</field>
            <field name="sequence">10</field>
            <field name="active">True</field>
        </record>


        <record id="template_ign_dimensions" model="lab.test.template">
            <field name="name">فحص الأبعاد لعينة قابلية الاشتعال</field>
            <field name="code">IGN_DIMENS</field>
            <field name="description">فحص الطول والعرض والسماكة وحساب الحجم والوزن والكثافة لعينة قابلية الاشتعال</field>
            <field name="standard_code">ISO 11925-2</field>
            <field name="industry_type">building</field>
            <field name="state">active</field>
            <field name="allow_parallel_tests">True</field>
            <field name="sequence">10</field>

            <field name="applicable_sample_type_ids" eval="[(6, 0, [ref('ignitability_sample_type')])]"/>
        </record>

        <record id="crit_ign_length" model="lab.test.criterion">
            <field name="template_id" ref="template_ign_dimensions"/>
            <field name="name">الطول (مم)</field>
            <field name="code">LENGTH_MM</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="sequence">10</field>
            <field name="is_required">True</field>
        </record>

        <record id="crit_ign_width" model="lab.test.criterion">
            <field name="template_id" ref="template_ign_dimensions"/>
            <field name="name">العرض (مم)</field>
            <field name="code">WIDTH_MM</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="sequence">20</field>
            <field name="is_required">True</field>
        </record>

        <record id="crit_ign_thickness" model="lab.test.criterion">
            <field name="template_id" ref="template_ign_dimensions"/>
            <field name="name">السماكة (مم)</field>
            <field name="code">THICK_MM</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="uom.product_uom_millimeter"/>
            <field name="sequence">30</field>
            <field name="is_required">True</field>
        </record>

        <record id="crit_ign_volume" model="lab.test.criterion">
            <field name="template_id" ref="template_ign_dimensions"/>
            <field name="name">الحجم</field>
            <field name="code">VOLUME_EST</field>
            <field name="test_type">computed</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>

            <field name="computation_formula">result = (LENGTH_MM * WIDTH_MM * THICK_MM) / 1000 if (LENGTH_MM and WIDTH_MM and THICK_MM) else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_ign_length'), ref('crit_ign_width'), ref('crit_ign_thickness')])]"/>
            <field name="sequence">40</field>
        </record>

        <record id="crit_ign_weight" model="lab.test.criterion">
            <field name="template_id" ref="template_ign_dimensions"/>
            <field name="name">الوزن (غم)</field>
            <field name="code">WEIGHT_G</field>
            <field name="test_type">numeric</field>
            <field name="uom_id" ref="appointment_products.uom_gram_ap"/>
            <field name="sequence">50</field>
            <field name="is_required">True</field>
        </record>
        <record id="crit_ign_density" model="lab.test.criterion">
            <field name="template_id" ref="template_ign_dimensions"/>
            <field name="name">الكثافة (kg/m³) - تقريبية</field>
            <field name="code">DENSITY_EST</field>
            <field name="test_type">computed</field>
            <field name="is_input_field">False</field>
            <field name="is_computed_field">True</field>
            <field name="computation_formula">result = (WEIGHT_G * 1000 / VOLUME_EST) if VOLUME_EST else 0</field>
            <field name="depends_on_criteria_ids" eval="[(6,0,[ref('crit_ign_weight'), ref('crit_ign_volume')])]"/>
            <field name="sequence">60</field>
            <field name="is_summary_field">False</field>
        </record>

        <record id="flow_template_ignitability" model="lab.test.flow.template">
            <field name="name">خطة فحص - قابلية الاشتعال</field>
            <field name="allow_parallel_tests">True</field>
            <field name="description">خطة فحص لعينة قابلية الاشتعال مع عينتين (Surface &amp; Edge)</field>
        </record>

        <record id="flow_line_ign_dimensions" model="lab.test.flow.template.line">
            <field name="template_id" ref="flow_template_ignitability"/>
            <field name="sequence">10</field>
            <field name="test_template_id" ref="template_ign_dimensions"/>
            <field name="sample_qty">2</field>
        </record>

        <record id="product_ignitability_sample" model="product.template">
            <field name="name">عينة - قابلية الاشتعال</field>
            <field name="default_code">IGN_SAMPLE</field>
            <field name="type">consu</field>
            <field name="sale_ok">False</field>
            <field name="purchase_ok">False</field>
            <field name="uom_id" ref="uom.product_uom_unit"/>
            <field name="uom_po_id" ref="uom.product_uom_unit"/>
            <field name="is_sample_product">True</field>
            <field name="sample_type_id" ref="ignitability_sample_type"/>
            <field name="test_flow_template_id" ref="flow_template_ignitability"/>
        </record>

    </data>
</odoo>
