<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        

        <record id="view_approval_task_assignment_wizard_form" model="ir.ui.view">
            <field name="name">approval.task.assignment.wizard.form</field>
            <field name="model">approval.task.assignment.wizard</field>
            <field name="arch" type="xml">
                <form string="تعيين مهمة بعد الموافقة">
                    <div class="alert alert-info" role="alert">
                        <strong>موافقة مع تعيين مهمة</strong><br/>
                        يمكنك الموافقة على الطلب وتعيين مهمة للتنفيذ في نفس الوقت
                    </div>
                    
                    <group>
                        <group string="معلومات الموافقة">
                            <field name="approver_id" readonly="1"/>
                            <field name="request_id" readonly="1"/>
                            <field name="document_id" readonly="1"/>
                        </group>
                        
                        <group string="بيان الأمر الرسمي">
                            <field name="official_directive" 
                                   placeholder="اكتب هنا بيان الأمر الرسمي أو التوجيه الذي سيتم تنفيذه..." 
                                   colspan="2" 
                                   nolabel="1"/>
                        </group>
                    </group>
                    
                    <notebook>
                        <page string="تعيين المهمة" name="task_assignment">
                            <group>
                                <group string="نوع التعيين">
                                    <field name="assignment_type" widget="radio"/>
                                </group>
                                
                                <group string="المُكلف">
                                    <field name="assigned_department_id" 
                                           invisible="assignment_type in ['employee', 'none']"
                                           required="assignment_type in ['department', 'both']"/>
                                    <field name="assigned_employee_id" 
                                           invisible="assignment_type in ['department', 'none']"
                                           required="assignment_type in ['employee', 'both']"/>
                                </group>
                            </group>
                            
                            <group string="تفاصيل المهمة" invisible="assignment_type == 'none'">
                                <group>
                                    <field name="task_title" required="assignment_type != 'none'"/>
                                    <field name="task_type" required="assignment_type != 'none'"/>
                                    <field name="priority" required="assignment_type != 'none'"/>
                                    <field name="due_date" required="assignment_type != 'none'"/>
                                </group>
                                
                                <group>
                                    <field name="task_description" 
                                           placeholder="وصف تفصيلي للمهمة والخطوات المطلوب تنفيذها..." 
                                           nolabel="1" 
                                           colspan="2"/>
                                </group>
                            </group>
                        </page>
                        
                        <page string="الإشعارات" name="notifications" invisible="assignment_type == 'none'">
                            <group>
                                <group string="إعدادات الإشعار">
                                    <field name="send_notification"/>
                                </group>
                            </group>
                            
                            <group string="رسالة الإشعار" invisible="not send_notification">
                                <field name="notification_message" 
                                       placeholder="رسالة الإشعار التي سيتم إرسالها للمُكلف..." 
                                       nolabel="1" 
                                       colspan="2"/>
                            </group>
                        </page>
                        
                        <page string="ملاحظات إضافية" name="notes">
                            <group>
                                <field name="approver_notes" 
                                       placeholder="ملاحظات إضافية من الموافق..." 
                                       nolabel="1" 
                                       colspan="2"/>
                            </group>
                        </page>
                    </notebook>
                    
                    <footer>
                        <button name="action_approve_and_assign" 
                                string="موافقة وتعيين مهمة" 
                                type="object" 
                                class="btn-primary"
                                invisible="assignment_type == 'none'"/>
                        <button name="action_approve_without_task" 
                                string="موافقة بدون مهمة" 
                                type="object" 
                                class="btn-secondary"/>
                        <button string="إلغاء" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>
        

        <record id="action_approval_task_assignment_wizard" model="ir.actions.act_window">
            <field name="name">تعيين مهمة بعد الموافقة</field>
            <field name="res_model">approval.task.assignment.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>
        
    </data>
</odoo>
