<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <record id="document_approval_wizard_form" model="ir.ui.view">
        <field name="name">معالج اعتماد الوثيقة</field>
        <field name="model">document.approval.wizard</field>
        <field name="arch" type="xml">
            <form string="اعتماد الوثيقة">
                <group>
                    <field name="document_id" readonly="1"/>
                    <field name="is_direct_approval" invisible="1"/>
                    <field name="requires_signature"/>
                </group>
                
                <div class="alert alert-success" invisible="not is_direct_approval">
                    <i class="fa fa-check-circle"/> 
                    <strong>اعتماد:</strong> سيتم اعتماد الوثيقة مباشرة وتغيير حالتها إلى "معتمدة"
                </div>
                
                <group invisible="requires_signature == False">
                    <field name="signature_data" widget="signature" 
                           string="التوقيع الرقمي"
                           options="{'width': 400, 'height': 200}"/>
                </group>
                
                <group>
                    <field name="approval_notes" placeholder="أضف ملاحظات الاعتماد (اختياري)"/>
                </group>
                
                <group string="اضافةهامش">
                    <field name="copy_to_user_ids" 
                           string="تعينن إلى"
                           widget="many2many_tags"
                           options="{'no_create': True}"
                           domain="[('share', '=', False)]"
                           help="اختر المستخدمين الذين سيتم إرسال نسخة إعلامية لهم بعد اعتماد الوثيقة"/>
                    <field name="copy_message_id" 
                           string="الهامش"
                           invisible="not copy_to_user_ids"
                           help="اختر الهامش"/>
                </group>
                
                <footer>
                    <button string="✓ اعتماد وتوقيع" 
                            name="action_approve" 
                            type="object" 
                            class="btn-primary"
                            invisible="not requires_signature"/>
                    
                    <button string="✓ اعتماد بدون توقيع" 
                            name="action_approve_without_signature" 
                            type="object" 
                            class="btn-success"
                            invisible="requires_signature"/>
                    
                    <button string="إلغاء" 
                            class="btn-secondary" 
                            special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

</odoo>
